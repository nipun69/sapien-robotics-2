# Automated PCB Defect Inspection System

## ğŸ“Œ Overview
This project implements an automated computer vision solution for Quality Assurance (QA) in manufacturing. Specifically, it utilizes the **YOLOv8** object detection architecture to identify, classify, and assess defects on Printed Circuit Boards (PCBs).

The system is designed to detect 6 common types of PCB defects, calculate their severity based on size, and generate both a visual annotation and a structured JSON report for integration with manufacturing systems.

## ğŸš€ Key Features
* **Multi-Class Detection:** Identifies 6 specific PCB defects:
    * `Missing_hole`, `Mouse_bite`, `Open_circuit`, `Short`, `Spur`, `Spurious_copper`
* **Automated Data Pipeline:** A specialized script converts raw DeepPCB dataset structures (XML/Folders) into YOLOv8-ready format.
* **Severity Assessment:** Heuristic logic categorizes defects as "Minor" or "Critical" based on their area relative to the board.
* **Structured Reporting:** Outputs detailed JSON logs including timestamp, confidence scores, and defect coordinates.

---

## ğŸ“‚ Project Structure

```text
â”œâ”€â”€ dataset/                # Place your raw downloaded dataset here
â”‚   â””â”€â”€ PCB_DATASET/        # (Must contain 'Annotations' and 'images' folders)
â”œâ”€â”€ dataset_fixed/          # Auto-generated by Script 01 (YOLO formatted)
â”œâ”€â”€ runs/                   # Stores training results and weights
â”œâ”€â”€ 01_fix_dataset_structure.py   # Data preprocessing script
â”œâ”€â”€ 02_train_model.py             # Model training script
â”œâ”€â”€ 03_inspection_system.py       # Inference and reporting script
â”œâ”€â”€ requirements.txt              # Dependencies
â””â”€â”€ README.md                     # Documentation
```
ğŸ› ï¸ Installation
Clone the repository:
```bash
pip install -r requirements.txt
```

â¯ï¸ Usage Guide
Step 1: Data Preprocessing
Raw PCB datasets often come in complex folder structures with XML annotations. Run this script to flatten the directory and convert annotations to the YOLO .txt format.
```bash
python fix_dataset_structure.py
```
Input: dataset/PCB_DATASET

Output: Creates a new folder dataset_fixed/ with train/ and val/ splits.

Step 2: Model Training
Train the YOLOv8 model on the processed data.
```bash
python train_model.py
```
Configuration: Uses dataset_fixed/data.yaml.

Output: Saves the trained model weights to runs/detect/pcb_final_model/weights/best.pt.

Note: Training defaults to 50 epochs.

Step 3: Run Inspection (Inference)
Run the inspection system on a new image to detect defects and generate a report.

```bash
python inspection_system.py
```
Input: Automatically picks a test image from the validation set (or you can modify the script to point to a live camera frame).

Output:

Prints a JSON Report to the console.

Saves an Annotated Image (e.g., result_image.jpg) showing bounding boxes.

ğŸ“Š Sample Output
Console JSON Report:

```JSON

{
  "file": "04_missing_hole_12.jpg",
  "timestamp": "2023-10-27T14:30:00",
  "defects": [
    {
      "type": "Missing_hole",
      "confidence": 0.92,
      "severity": "Critical",
      "bbox": [450, 120, 480, 150]
    }
  ]
}
```
ğŸ¤– Model & Classes
The system is trained on the following classes:

Missing Hole: A drill location missing its hole.

Mouse Bite: A bite-like defect on the copper trace.

Open Circuit: A broken connection.

Short: Unwanted connection between two traces.

Spur: Small projection of copper.

Spurious Copper: Random copper artifacts.

ğŸ“ License
This project is open-source and available under the MIT License.

